<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Domains - bucket.social</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
            color: white;
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            font-weight: 700;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .content {
            background: white;
            border-radius: 12px;
            padding: 3rem;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }

        .section {
            margin-bottom: 3rem;
        }

        .section h2 {
            font-size: 2rem;
            color: #2d3748;
            margin-bottom: 1rem;
            border-bottom: 3px solid #667eea;
            padding-bottom: 0.5rem;
        }

        .section h3 {
            font-size: 1.5rem;
            color: #4a5568;
            margin: 2rem 0 1rem 0;
        }

        .step {
            background: #f7fafc;
            border-left: 4px solid #667eea;
            padding: 1.5rem;
            margin: 1rem 0;
            border-radius: 0 8px 8px 0;
        }

        .step h4 {
            color: #2d3748;
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }

        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 8px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9rem;
            overflow-x: auto;
            margin: 1rem 0;
        }

        .code-block .comment {
            color: #a0aec0;
        }

        .code-block .string {
            color: #68d391;
        }

        .code-block .keyword {
            color: #f6ad55;
        }

        .example {
            background: #edf2f7;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .example h4 {
            color: #2d3748;
            margin-bottom: 1rem;
        }

        .warning {
            background: #fed7d7;
            border: 1px solid #feb2b2;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            color: #c53030;
        }

        .warning::before {
            content: "‚ö†Ô∏è ";
            font-weight: bold;
        }

        .success {
            background: #c6f6d5;
            border: 1px solid #9ae6b4;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            color: #22543d;
        }

        .success::before {
            content: "‚úÖ ";
            font-weight: bold;
        }

        .api-example {
            background: #2d3748;
            color: #e2e8f0;
            padding: 1.5rem;
            border-radius: 8px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9rem;
            margin: 1rem 0;
        }

        .method {
            color: #f6ad55;
            font-weight: bold;
        }

        .url {
            color: #68d391;
        }

        .nav {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            padding: 1rem 0;
            margin-bottom: 2rem;
            border-radius: 8px;
        }

        .nav a {
            color: white;
            text-decoration: none;
            margin: 0 1rem;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            transition: background 0.3s;
        }

        .nav a:hover {
            background: rgba(255,255,255,0.2);
        }

        .back-link {
            display: inline-block;
            margin-bottom: 2rem;
            color: white;
            text-decoration: none;
            padding: 0.5rem 1rem;
            background: rgba(255,255,255,0.2);
            border-radius: 6px;
            transition: background 0.3s;
        }

        .back-link:hover {
            background: rgba(255,255,255,0.3);
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .feature-card {
            background: #f7fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 1.5rem;
            text-align: center;
        }

        .feature-card h4 {
            color: #2d3748;
            margin-bottom: 1rem;
        }

        .feature-card p {
            color: #4a5568;
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .content {
                padding: 2rem;
            }
            
            .header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="/" class="back-link">‚Üê Back to Home</a>
        
        <div class="header">
            <h1>Custom Domains</h1>
            <p>Set up your own domain for public blob hosting with bucket.social</p>
        </div>

        <div class="content">
            <div class="section">
                <h2>Overview</h2>
                <p>With bucket.social, you can use your own domain to serve blobs publicly. This allows you to:</p>
                
                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>üåê Custom URLs</h4>
                        <p>Serve your blobs from your own domain instead of bucket.social</p>
                    </div>
                    <div class="feature-card">
                        <h4>üîó Direct Links</h4>
                        <p>Use blob URLs directly in HTML img, video, or audio tags</p>
                    </div>
                    <div class="feature-card">
                        <h4>üöÄ No Authentication</h4>
                        <p>Public access to your blobs without requiring login</p>
                    </div>
                    <div class="feature-card">
                        <h4>‚ö° Fast Delivery</h4>
                        <p>Leverage CDN caching for optimal performance</p>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>How It Works</h2>
                <p>When someone visits <code>yourdomain.com/blobs/image.jpg</code>:</p>
                
                <div class="step">
                    <h4>1. Domain Detection</h4>
                    <p>Our service detects that the request is for your custom domain</p>
                </div>
                
                <div class="step">
                    <h4>2. User Lookup</h4>
                    <p>We look up which user owns this domain in our registry</p>
                </div>
                
                <div class="step">
                    <h4>3. PDS Resolution</h4>
                    <p>We determine which AT Protocol server stores your data</p>
                </div>
                
                <div class="step">
                    <h4>4. Blob Retrieval</h4>
                    <p>We fetch the blob from your AT Protocol repository</p>
                </div>
                
                <div class="step">
                    <h4>5. Public Delivery</h4>
                    <p>The blob is served publicly without requiring authentication</p>
                </div>
            </div>

            <div class="section">
                <h2>Setup Guide</h2>
                
                <h3>Step 1: Register Your Domain</h3>
                <div class="step">
                    <h4>Using the API</h4>
                    <div class="api-example">
<span class="method">POST</span> <span class="url">/domains</span>
<span class="comment">Content-Type: application/json</span>
<span class="comment">Authorization: Basic base64(handle:appPassword)</span>

{
  "domain": "yourdomain.com"
}
                    </div>
                </div>

                <div class="step">
                    <h4>Using the Playground</h4>
                    <p>Visit <a href="/playground.html">the playground</a> and use the domain management interface to register your domain.</p>
                </div>

                <h3>Step 2: Configure DNS</h3>
                <div class="step">
                    <h4>Create a CNAME Record</h4>
                    <p>In your domain's DNS settings, create a CNAME record:</p>
                    
                    <div class="code-block">
<span class="comment">Type: CNAME</span>
<span class="comment">Name: @ (or your subdomain)</span>
<span class="comment">Value: bucket.social</span>
<span class="comment">TTL: 3600 (or your preferred TTL)</span>
                    </div>
                </div>

                <div class="example">
                    <h4>Example DNS Configuration</h4>
                    <p>If you want to use <code>images.yourdomain.com</code>:</p>
                    <div class="code-block">
<span class="comment">CNAME Record:</span>
<span class="keyword">Name:</span> images
<span class="keyword">Value:</span> bucket.social
<span class="keyword">TTL:</span> 3600
                    </div>
                </div>

                <div class="warning">
                    <strong>Important:</strong> DNS changes can take up to 48 hours to propagate globally, though most changes are visible within a few hours.
                </div>

                <h3>Step 3: Upload Your Blobs</h3>
                <div class="step">
                    <h4>Upload via API or Playground</h4>
                    <p>Upload your blobs using your AT Protocol credentials. The blobs will be accessible via your custom domain once DNS propagates.</p>
                </div>

                <h3>Step 4: Test Your Setup</h3>
                <div class="step">
                    <h4>Verify Domain Access</h4>
                    <p>Once DNS has propagated, test your setup:</p>
                    
                    <div class="code-block">
<span class="comment">Test your domain registration:</span>
curl -H "Host: yourdomain.com" http://localhost:3002/health

<span class="comment">Access a blob via your domain:</span>
curl -H "Host: yourdomain.com" http://localhost:3002/blobs/your-image.jpg
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>Usage Examples</h2>
                
                <h3>HTML Image Tags</h3>
                <div class="example">
                    <h4>Direct Image Embedding</h4>
                    <div class="code-block">
&lt;img src="https://yourdomain.com/blobs/profile-photo.jpg" alt="Profile Photo"&gt;
                    </div>
                </div>

                <h3>CSS Background Images</h3>
                <div class="example">
                    <h4>Background Image Usage</h4>
                    <div class="code-block">
.hero-section {
  background-image: url('https://yourdomain.com/blobs/hero-bg.jpg');
  background-size: cover;
}
                    </div>
                </div>

                <h3>Video and Audio</h3>
                <div class="example">
                    <h4>Media Embedding</h4>
                    <div class="code-block">
&lt;video controls&gt;
  &lt;source src="https://yourdomain.com/blobs/presentation.mp4" type="video/mp4"&gt;
&lt;/video&gt;

&lt;audio controls&gt;
  &lt;source src="https://yourdomain.com/blobs/podcast.mp3" type="audio/mpeg"&gt;
&lt;/audio&gt;
                    </div>
                </div>

                <h3>Document Links</h3>
                <div class="example">
                    <h4>Direct Document Access</h4>
                    <div class="code-block">
&lt;a href="https://yourdomain.com/blobs/report.pdf"&gt;Download Report&lt;/a&gt;
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>API Reference</h2>
                
                <h3>Domain Management Endpoints</h3>
                
                <div class="api-example">
<span class="method">POST</span> <span class="url">/domains</span>
<span class="comment">Register a new domain</span>

<span class="method">GET</span> <span class="url">/domains</span>
<span class="comment">List all your registered domains</span>

<span class="method">GET</span> <span class="url">/domains/:domain</span>
<span class="comment">Get details for a specific domain</span>

<span class="method">PUT</span> <span class="url">/domains/:domain</span>
<span class="comment">Update domain settings</span>

<span class="method">DELETE</span> <span class="url">/domains/:domain</span>
<span class="comment">Delete a domain registration</span>
                </div>

                <h3>Authentication</h3>
                <p>All domain management endpoints require Basic Authentication using your AT Protocol handle and app password:</p>
                
                <div class="code-block">
<span class="comment">Example:</span>
Authorization: Basic d2VibG9nc29jaWFsLmJza3kuc29jaWFsOnRlc3RwYXNzd29yZA==
                </div>
            </div>

            <div class="section">
                <h2>Best Practices</h2>
                
                <div class="step">
                    <h4>Domain Selection</h4>
                    <ul>
                        <li>Use a subdomain for blob hosting (e.g., <code>cdn.yourdomain.com</code>)</li>
                        <li>Keep your main domain separate from blob hosting</li>
                        <li>Choose a memorable and brand-appropriate subdomain</li>
                    </ul>
                </div>

                <div class="step">
                    <h4>File Organization</h4>
                    <ul>
                        <li>Use descriptive blob keys (e.g., <code>hero-banner-2024.jpg</code>)</li>
                        <li>Consider using versioning for important assets</li>
                        <li>Organize files logically with consistent naming</li>
                    </ul>
                </div>

                <div class="step">
                    <h4>Performance</h4>
                    <ul>
                        <li>Optimize images before uploading</li>
                        <li>Use appropriate file formats (WebP for images, MP4 for videos)</li>
                        <li>Consider file sizes for mobile users</li>
                    </ul>
                </div>

                <div class="step">
                    <h4>Security</h4>
                    <ul>
                        <li>Only upload content you want to be publicly accessible</li>
                        <li>Regularly review your domain registrations</li>
                        <li>Use strong AT Protocol app passwords</li>
                    </ul>
                </div>
            </div>

            <div class="section">
                <h2>Troubleshooting</h2>
                
                <h3>Common Issues</h3>
                
                <div class="warning">
                    <strong>Domain Not Found (404)</strong><br>
                    Make sure you've registered your domain with our service before configuring DNS.
                </div>

                <div class="warning">
                    <strong>DNS Not Propagated</strong><br>
                    DNS changes can take time to propagate. Use tools like <code>dig</code> or <code>nslookup</code> to check propagation status.
                </div>

                <div class="warning">
                    <strong>Authentication Errors</strong><br>
                    Ensure you're using the correct AT Protocol handle and app password for domain management.
                </div>

                <div class="success">
                    <strong>Testing DNS Propagation</strong><br>
                    Use <code>dig yourdomain.com CNAME</code> to verify your CNAME record is properly configured.
                </div>
            </div>

            <div class="section">
                <h2>Future Features</h2>
                <p>We're working on additional features for custom domains:</p>
                
                <ul>
                    <li><strong>CDN Integration:</strong> Automatic CDN caching for faster global delivery</li>
                    <li><strong>Custom Headers:</strong> Set custom HTTP headers for your domains</li>
                    <li><strong>Analytics:</strong> Track usage and performance metrics</li>
                    <li><strong>SSL Certificates:</strong> Automatic SSL certificate management</li>
                    <li><strong>Rate Limiting:</strong> Custom rate limits per domain</li>
                </ul>
            </div>
        </div>
    </div>
</body>
</html>
